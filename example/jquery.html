<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>jQuery sample</title>
	<link rel="stylesheet" href="../dist/css/tdgal.css" />
    
    <style type="text/css">
        .fixed-width{
            width: 900px;
            margin: 0 auto;
        }
        
        .ctrl {
            text-align: center;
            margin: 10px 0px;
        }
        
        .back-content {  
            font-family: Arial;
            padding: 20px;
            text-align: left;
            font-size: 1.5em;
        }
        
        .back-content .title {
            font-size: 2.5em;
            padding: 15px 0px;
        }
    </style>
</head>
<body>
	<div class="ctrl">
        <button type="button" onclick="create()">Create</button>
        <button type="button" onclick="destroy()">Destroy</button>
        <button type="button" onclick="changeData()">Change data</button>
        <button type="button" onclick="changeWidth()">Toggle width</button>
        <button type="button" onclick="$('.gallery').tdGal('prev')">Previous</button>
        <button type="button" onclick="$('.gallery').tdGal('next')">Next</button>
        <button type="button" onclick="count()">Count elements</button>
        &nbsp;
        <input type="number" id="nb" value="0" onchange="gotoOffset()" />
        <button type="button" onclick="gotoOffset()">go</button>
	</div>
    
    <div class="gallery">
        <ul>
            <li data-properties="{&quot;description&quot;: &quot;TestLeRoger <br />sdfjksd sdfoisdf sdofijsdf sdfoijsdf odsf&quot;}">
                <a href="#" title="X-Men trolo"><img src="http://images.allocine.fr/pictures/14/03/24/14/35/575642.jpg" /></a>
            </li>
            <li data-properties="{&quot;description&quot;: &quot;Dexter <br />sdfjksd sdfoisdf sdofijsdf sdfoijsdf odsf&quot;}">
                <a href="/dex" title="Dexter S01e02"><img src="http://images.allocine.fr/pictures/210/032/21003280_20130504002100017.jpg" /></a>
            </li>
            <li data-properties="{&quot;description&quot;: &quot;MrRobot <br />sdfjksd sdfoisdf sdofijsdf sdfoijsdf odsf&quot;}">
                <a href="/robot" title="Mr. ROBOT S01"><img src="http://images.allocine.fr/pictures/15/05/06/16/13/020977.jpg" /></a>
            </li>
            <li>
                <a href="/orange" title="Orange is the new black"><img src="http://images.allocine.fr/pictures/15/06/10/10/15/094325.jpg" /></a>
            </li>
            <li>
                <a href="#"><img src="http://images.allocine.fr/medias/nmedia/18/90/71/79/20214705.jpg" /></a>
            </li>
            <li>
                <a href="/jourviendu" title="Notre jour viendra"><img src="http://images.allocine.fr/medias/nmedia/18/78/20/39/19474488.jpg" /></a>
            </li>
            <li>
                <a href="/magnolia"><img src="http://images.allocine.fr/medias/04/66/25/046625_af.jpg" /></a>
            </li>
        </ul>
    </div>
    
	<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
	<script src="../dist/js/tdgal.jquery.js"></script>
    
	<script type="text/javascript">
        function destroy(){
            $('.gallery').tdGal('destroy');
        }
        
        function create(){
            $('.gallery').tdGal({
                heightRatio: 1.333, //you must specify this parameter ( = width / height )
                onClick: function(data){
                    alert("Click => \nLabel: " + data.label + "\nLink: " + data.link + "\nImage: " + data.image);
                },
                onFocus: function(data){
                    alert("Focus => \nLabel: " + data.label + "\nLink: " + data.link + "\nImage: " + data.image);
                },
                backTemplate: function(data){
                    var $back = $('<div class="back-content"><div class="title"></div><div class="description"></div></div>'); 
                    
                    if(data.label){
                        $back.find('.title').html(data.label);
                    }
                    if(data.description){
                        $back.find('.description').html(data.description);
                    }
                    
                    return $back;
                },
                classes: 'Class1 Class2'
            });
        }
    
        function changeData(){
            var all = [
                { label: "X-Men trolo", image: "http://images.allocine.fr/pictures/14/03/24/14/35/575642.jpg" },
                { image: "http://images.allocine.fr/medias/nmedia/18/90/71/79/20214705.jpg" },
                { link: "/dex", label: "Dexter S01e02", image: "http://images.allocine.fr/pictures/210/032/21003280_20130504002100017.jpg" },
                { link: "/robot", label: "Mr. ROBOT S01", image: "http://images.allocine.fr/pictures/15/05/06/16/13/020977.jpg" },
                { link: "/orange", label: "Orange is the new black", image: "http://images.allocine.fr/pictures/15/06/10/10/15/094325.jpg" },
                { link: "/jourviendu", label: "Notre jour viendra", image: "http://images.allocine.fr/medias/nmedia/18/78/20/39/19474488.jpg" },
                { link: "/magnolia", image: "http://images.allocine.fr/medias/04/66/25/046625_af.jpg" } 
            ];
            
            var all = all.splice(0, Math.floor(Math.random() * (all.length - 2)) + 2);
            all.sort(function(){
                return 0.5 - Math.random();
            })
            
            $('.gallery').tdGal('elements', all);
        }
        
        function gotoOffset(){
            var val = parseInt($('#nb').val());
            $('.gallery').tdGal('focus', val);
        }
        
        function count(){
            alert($('.gallery').tdGal('count'));
        }
        
        function changeWidth(){
            $('.gallery').toggleClass('fixed-width')
                         .tdGal('update');
        }
	</script>
</body>
</html>
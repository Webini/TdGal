!function(a,b){"undefined"!=typeof module&&module.exports?"undefined"==typeof angular?module.exports=b(require("angular")):module.exports=b(angular):"function"==typeof define&&define.amd?define(["angular"],b):b(a.angular)}(this,function(a){var b=a.module("tdGal",[]);b.directive("tdGalBackface",["$controller",function(){return{restrict:"E",templateUrl:function(a,b){return b.templateUrl}}}]),b.directive("tdGal",["$controller","$compile","$rootScope",function(a,b,c){return{restrict:"E",replace:!1,scope:{data:"=",index:"="},link:function(a,d,e,f){var g=e.templateUrl;a.localIndex=a.index;var h={heightRatio:a.$eval(e.heightRatio),classes:e["class"],backTemplate:function(c){if(!g)return"";var d=document.createElement("td-gal-backface");d.setAttribute("template-url",g);var e=a.$new();return e.data=c,b(d)(e),d},onClick:function(b){a.$emit("tdgal-click",b)},onFocus:function(b,d){a.index=a.localIndex=d,a.$$phase||c.$$phase||a.$apply(),a.$emit("tdgal-focus",b)},onInit:function(){a.index&&d.tdGal("focus",a.index)}};(!h.heightRatio||h.heightRatio<=0)&&delete h.heightRatio,(!h.classes||h.classes<=0)&&delete h.classes,d.tdGal(h);var i=a.$watch("index",function(b){a.localIndex!=b&&d.tdGal("focus",b)}),j=a.$watch("data",function(a){d.tdGal("elements",a)});a.$on("$destroy",function(){d.tdGal("destroy"),j(),i()})}}}])});